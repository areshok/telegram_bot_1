# План разработки
___
## Технологии
 - python 3.10
 - django 4.1
 - postgresql
 - docker
 - ubuntu 24.04
 - NGINX

## Описание
для чего существует по



## ТЗ

 - Телеграм бот
	 - [x] в бот попадают по скинированию qrcode
	 - [x] принимает сообщения пользователя
	 - [x] сохраняет их в бд
	 - [x] присылает ответ
	 - [x] делает рассылку

- Web 
	- [x] карточка товара
		- [x]  создать
		- [x] удалить
		- [x]  изменить
	- [x] список всех карточек товаров
	- [x] список всех комметраниев о товаре сделанные через телеграм бота
		- [x] у коментария должно быть поля просмотренно\ не просмотренно
	- [x] список маркетонговых сообщений
	- [x] рассылка маркетенговых сообщений
## Что можно добавить от себя
 отчетность


## URL
**Web**

| url                     | Метод | описание                                      |
| ----------------------- | ----- | --------------------------------------------- |
| Товары                  |       |                                               |
| /product/               |       | список товаров                                |
| /product/create/        | post  | создание товара                               |
| /product/:id/update/    | post  | обновление информации товара                  |
| /product/:id/delete/    | post  | удаление товара                               |
| Отзывы                  |       |                                               |
| /comment/               |       | список отзывов                                |
| /comment/update/:id     | post  | просмотреть отзыв                             |
| Маркетинговое сообщение |       |                                               |
| /message/               |       | список маркетинговых сообщенийй               |
| /message/create/        | post  | создание маркетингового сообщения             |
| /message/update/id      | post  | обновление информации маркетингового ообщения |
| /message/delete/:id     | post  | удалить маркетинговое сообщение               |
| /message/:id/send/      | get   | рассылка маркетингового ообщения              |
|                         |       |                                               |


**API**

| url                     | Метод  | описание                     |
| ----------------------- | ------ | ---------------------------- |
| Товары                  |        |                              |
| /api/product/           | get    | список товаров               |
| /api/poduct/            | post   | создать товар                |
| /api/product/:id/       | put    | обновление информации товара |
| /api/product/:id/       | delete | удаление товара              |
| Отзывы                  |        |                              |
| /api/comment/           | get    | список отзывов               |
| /api/comment/:id/update | put    |                              |
|                         |        |                              |
| Маркетинговое сообщение |        |                              |
| /api/message/           | get    |                              |
| /api/message/create/    | post   |                              |
| /api/message/:id/update | put    |                              |


## База данных

**Карточка товара**

| Поле        | тип поля | валидация   | описание                                                                                     |
| ----------- | -------- | ----------- | -------------------------------------------------------------------------------------------- |
| id          | integer  | primary key | первичный ключ таблицы                                                                       |
| name        | text     |             | название товара                                                                              |
| description | text     |             | описание товара                                                                              |
| qrcode      | image    |             | qrcode товара, картинка                                                                      |
| visible     | boolean  |             | будет отображаться товар или нет, в случае удаление будет ставиться False, по умолчанию True |
**Маркетплейсы**

| Поле | тип поля | валидация   | описание               |
| ---- | -------- | ----------- | ---------------------- |
| id   | integer  | primary key | первичный ключ таблицы |
| name | text     |             | Название маркетплейса  |


**Ссылки товара на маркетлейсах**

| Поле           | тип поля              | валидация       | описание                       |
| -------------- | --------------------- | --------------- | ------------------------------ |
| id             | integer               | primary key     | первичный ключ таблицы         |
| marketplace_id | integer, foreigen key |                 | id таблицы маркетплейсов       |
| product_id     | integer, foreigen key |                 | id таблицы товаров             |
| url            | text                  | проверка на url | ссылка на товар в маркетплейсе |


**Маркетинговые сообщения**

| поле    | тип поля              | валидация | описание                                                                                     |
| ------- | --------------------- | --------- | -------------------------------------------------------------------------------------------- |
| id      | integer, primary key  |           | первичный ключ таблицы                                                                       |
| product | integer, foreigen key |           | id таблицы товара                                                                            |
| title   | text                  |           | заголовок маркетингового сообщения                                                           |
| body    | text                  |           | тело маркетингового сообщения                                                                |
| status  | boolean               |           | статус рассылки маркетингового сообщения                                                     |
| visible | boolean               |           | будет отображаться товар или нет, в случае удаление будет ставиться False, по умолчанию True |


**Профиль пользователя телеграмма**

| поле        | тип поля             | валидация        | Описание     |
| ----------- | -------------------- | ---------------- | ------------ |
| id          | integer, primary key |                  |              |
| id_telegram | integer              | > 0              | id телеграмм |
| username    | text                 | длина 32 символа |              |
| first_name  | text                 | длина 64 символа | имя          |
| last_name   | text                 | длина 64 символа | фамилия      |

**Комментарий о товаре**
коментарии не должны удаляться при удалении профиля телеграм

| поле                | тип поля              | валидация              | Описание                                                             |
| ------------------- | --------------------- | ---------------------- | -------------------------------------------------------------------- |
| id                  |                       |                        |                                                                      |
| prodict_id          | integer, foreigen key |                        | id таблицы Товаров                                                   |
| telegram_profile_id | integer, foreigen key |                        | id таблицы пользователей Телеграм                                    |
| score               | integer               | от 1 до 5 включительно | оценка товара выставленная пользователем                             |
| comment             | text                  |                        | коментарий о товаре написанный пользователем                         |
| status              | boolean               |                        | ставиться True, когда сотрудник просмотрел отзыв. По умолчанию False |
| employee_id         | integer, foreigen key |                        | id таблицы user, ставиться когда сотрудник просмотрел отзыв          |
|                     |                       |                        |                                                                      |

## Структура приложения
```
|backend/
|--api/
|--product/
|--tgm/
|--tests/
|--backend/
|--manage.py
|documentation/
|.gitignore

```

## FAQ
вопросы которые могут задавать пользователи
вопрос \ ответ